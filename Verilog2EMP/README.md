Circuit file for the EMP Toolkit
=======
This directory contains the code to convert the netlist generated by TinyGarble to the circuit format used in the [EMP Toolkit](https://github.com/emp-toolkit).

## Circuit Format
All the input bits from the garbler are concatenated to form a single input `g_input`. Similarly all the input bits from the evaluator are concatenated to form a single input `e_input` and all the output bits are concatenated to form a single input `o`. The module structure is as follows. 
```
module _name_ ( 
  input [M0-1:0] e_init,
  input [M-1:0]  e_input,
  input [N0-1:0] g_init,
  input [N-1:0]  g_input,
  output [P-1:0] o
  );
  
  //description
  
endmodule 
```

## Wire Index
```
1. e_init (e_init[0] is placed at wire 0, if present)
2. e_input
3. g_init
4. g_input
5. internal wires
6. o (MSB of o is the wire with the highest index)
```

## EMP Format
```
<# of gates> <# of wires>
<# of wires from evaluator> <# of init wires from evaluator> <# of wires from garbler> <# of init wires from garbler> <# of wires in o> 

for g = 0 to <No_of_gates>-1
	<No_of_input_bit><No_of_output_bit> <index of input0 wire> <index of input1 wire>  <index of output wire> <LOGIC>
endfor
```
Number of wires from evaluator or garbler counts both init and input wires

## Usage
```
./V2EMP_Main 

  -h [ --help ]         produce help message.
  -i [ --netlist ] arg  Input netlist (verilog .v) file address.
  -o [ --emp ] arg      Output EMPCircuit file address.

```

## References
- Xiao Wang and Alex J. Malozemoff and Jonathan Katz. "EMP-toolkit: Efficient MultiParty computation toolkit.", 2016. 
- Ebrahim M. Songhori, Siam U. Hussain, Ahmad-Reza Sadeghi, Thomas Schneider
and Farinaz Koushanfar, ["TinyGarble: Highly Compressed and Scalable Sequential
Garbled Circuits."](http://esonghori.github.io/file/TinyGarble.pdf) <i>Security
and Privacy, 2015 IEEE Symposium on</i> May, 2015.

